name: Multi Stage CI Workflow

on:
  push:
    branches:
      - master

jobs:

  stage1:
    name: Stage1-Checkout & Initial
    runs-on: ubuntu-latest

    steps:
      - name: Sub Stage 1.1 - Checkout Code
        uses: actions/checkout@v4

      - name: Sub Stage 1.2 - Validate Files
        run: echo "Validating files..."

      - name: Sub Stage 1.3 - Code Formatting Check
        run: echo "Formatting check completed"

  stage2:
    name: Stage2-Build-Process
    runs-on: ubuntu-latest
    needs: stage1     # ðŸ‘ˆ depends on stage1

    steps:
      - name: Stage 2 Step
        run: echo "Stage 2 completed successfully"
        #run: exit 1  # Simulating a failure here
    

  stage3:
    name: Stage3-Final-Deploy
    runs-on: ubuntu-latest
    needs: stage2     # ðŸ‘ˆ depends on stage2

    steps:
      - name: Stage 3 Step
        run: echo "Stage 3 completed successfully"